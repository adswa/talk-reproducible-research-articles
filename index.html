<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Data + Code + Software = PDF</title>

  <meta name="description" content="How to write a reproducible research article">
  <meta name="author" content="Adina Wagner">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="css/main.css" id="theme">
  <link rel="stylesheet" href="reveal.js/css/reveal.css">
  <link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <link rel="stylesheet" href="s.css" id="theme">
  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
<!--<style type="text/css">
    dt, dd { display: inline-block; float: left; }
    dt { clear: left; }
</style>
-->
</head>
<body>

<div class="reveal">
<div class="slides">


<section>
<section>
    <h2><small>Data + Code + Software = PDF:</small> <br>
        How to write a reproducible research article</h2>

  <div style="margin-top:1em;text-align:center">
  <table style="border: none;">
  <tr>
	<td>Adina Wagner
	  <br><small>
		<a href="https://twitter.com/AdinaKrik" target="_blank">
		  <img data-src="pics/twitter.png" style="height:30px;margin:0px" />
		  @AdinaKrik</a></small></td>
    <td><img style="height:100px;margin-right:10px" data-src="pics/fzj_logo.svg" />
	  <br></td>
  </tr>
  <tr>
    <td>
        <small><a href="http://psychoinformatics.de" target="_blank">Psychoinformatics lab</a>,
          <br> Institute of Neuroscience and
          Medicine, Brain &amp; Behavior (INM-7)<br>
       Research Center Jülich<br>
        <a href="https://repronim.org" target="_blank">ReproNim/INCF fellow</a></small><br>

    </td>
    <td>
          <img height="90" src="pics/repronim.png">
          <img height="80" src="pics/incf.png"
    </td>
  </tr>
  </table>
  </div>
        <p style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:0px;margin-bottom:100px;margin-left:1000px">
        <img src="pics/QRcode.png" height="200">
    </p>
<br><br><small>

    Slides: <a href="https://doi.org/10.5281/zenodo.5508797" target="_blank">
    DOI 10.5281/zenodo.5508797</a> (Scan the QR code)
    <br>
    Sources: <a
    href="https://github.com/adswa/talk-reproducible-research-articles"
    target="_blank"> github.com/adswa/talk-reproducible-research-articles</a>
</small>
</a>
</section>
</section>

<!-- Introduction -->

<section>
  <section  data-background-image="https://alchetron.com/cdn/jon-claerbout-c970ff70-1e60-4ccc-92ca-583bba1b56b-resize-750.jpeg",
  data-background-opacity="0.5">
      <q cite="Jon Claerbout (paraphrased)">
          An article about computational science in a scientific publication
          is not the scholarship itself, it is merely advertising of the scholarship.
          The actual scholarship is the complete software development environment
          and the complete set of instructions which generated the figures.
      </q>
      <br><small>
      <a href="https://library.seg.org/doi/abs/10.1190/1.1822162" target="_blank">
          Jon Claerbout (paraphrased)</a></small>
  </section>


  <section data-transition="None">
      <h2>Science is more than a PDF</h2>
      <img src="pics/agoodstart.png">
      <imgcredit>CC-BY Scriberia and <a href="https://the-turing-way.netlify.app/reproducible-research/rdm.html" target="_blank">
                    The Turing Way</a>
      </imgcredit>
  </section>

  <section data-transition="None">
      <h2>Science is more than a PDF</h2>
      <img src="pics/agoodstart2.png">
      <imgcredit>CC-BY Scriberia and <a href="https://the-turing-way.netlify.app/reproducible-research/rdm.html" target="_blank">
                    The Turing Way</a>
      </imgcredit>
  </section>

  <section data-transition="None">
      <h2>Science is more than a PDF</h2>
      <img src="pics/agoodstart3.png">
      <imgcredit>CC-BY Scriberia and <a href="https://the-turing-way.netlify.app/reproducible-research/rdm.html" target="_blank">
                    The Turing Way</a>
      </imgcredit>
  </section>

    <section>
        <h2>Research ingredients</h2>

        <img class='fragment fade-in' data-fragment-index="1" src="pics/flour.png" width="200px">
        <img class='fragment fade-in' data-fragment-index="1" src="pics/water.png" width="400px">
        <img class='fragment fade-in' data-fragment-index="1" src="pics/yeast.png" width="350px">

        <p class="fragment fade-in" data-fragment-index="2">But what about the recipe?</p>
        <img class='fragment fade-in' data-fragment-index="3" src="pics/bread.png" width="550px">
    </section>

    <section data-transition="None">
        <h2>Open Sharing may not be enough</h2>
        <dl class="fragment fade-in-then-semi-out" style="font-size:30px">
            <dt><a href="https://royalsocietypublishing.org/doi/10.1098/rsos.180448" target="_blank">
                Hardwicke et al., 2018</a>: </dt>
            <ul>
                <li>Open data of 38% of N=174 studies were not "in principle reusable"</li>
                <li>24 out of 35 studies with reusable data: irreproducible main results without assistance of the original authors, </li>
                <li>13 out of 24: not exactly reproducible even with assistance </li>
                </ul>
            <dt><a href="https://journals.sagepub.com/doi/full/10.1177/2515245920918872" target="_blank">
                Obels et al., 2020</a>: </dt>
            <ul>
                <li>N=62 Registered Reports</li>
                <li>36 articles shared both data and code to reproduce results</li>
                <li>Out of those, main findings of 15 articles could not be reproduced</li>
            </ul>
        </dl>
        <br><br>
        <table style="font-size:30px" class="fragment fade-in">
            <tr style="vertical-align:top">
                <td>
                Data Management<br>
                <dl style="font-size: 25px;vertical-align:top">
                    <!-- Data Management -->
                    <li>multiple versions of code/data</li>
                    <li>suboptimal data curation</li>
                    <li>unclear execution order/entry points</li>
                    <li>non-portable code</li>
                </dl>
                </td>

            <td style="vertical-align:top">
                Technical problems <br>
                <dl style="font-size: 25px">
                    <!-- -->
                    <li>wrong software <br>
                        environment</li>
                    <li>proprietary software</li>
                    <li>link rot/accessibility issues</li>
                </dl>
            </td>
            <td style="vertical-align:top">
                Human errors <br>
                <dl style="font-size: 25px">
                <!-- Human errors in the manuscript -->
                    <li>reporting (copy-paste) errors</li>
                    <li>ambiguous analysis specification</li>

                </dl>
            </td>
            </tr>
        </table>
    </section>

    <section>
        <h2>Be kind to your future self, work reproducibly</h2>
        <img class="fragment fade-in" src="pics/your-closest-collaborator.png">
        <!--<img class="fragment fade-in" height="400px" src="pics/ten-years-challenge.png">-->
    </section>
</section>
<!--First: show you what this looks like, second, explain how -->

  <section>
      <h2>A reproducible paper in the wild</h2>
      <video src="/home/adina/Videos/remodnav/remodnav.webm" controls></video>
          <small>You can find this recording on YouTube:
              <a href="https://www.youtube.com/watch?v=nhLqmF58SLQ" target="_blank">
                  https://www.youtube.com/watch?v=nhLqmF58SLQ</a></small>
  </section>

    <section>
        <h2>Building blocks of the publication</h2>
        <small>
            <strong>Disclaimer: This is not the only way to write a reproducible paper!</strong>
      <ul style="">
          <li>Original reproducible paper:
          <a href=https://github.com/psychoinformatics-de/paper-remodnav
   target="_blank">https://github.com/psychoinformatics-de/paper-remodnav</a></li>
          <li>Resulting publication:
              <a href="https://doi.org/10.3758/s13428-020-01428-x" target="_blank">
                  https://doi.org/10.3758/s13428-020-01428-x
              </a>
          </li>
          <li>Step-by-Step instructions:
              <a href="http://handbook.datalad.org/en/latest/usecases/reproducible-paper.html" target="_blank">
                  handbook.datalad.org/usecases/reproducible-paper.html
              </a> </li>
          <li>Tutorial:
              <a href="https://github.com/datalad-handbook/repro-paper-sketch" target="_blank">
                github.com/datalad-handbook/repro-paper-sketch
          </a> </li>
      </ul>
        </small><br><br>

        Specific workflow and software choices:
        <ul style="font-size: 30px">
          <li>Version control and data transport: Git & DataLad </li>
          <li>Workflow management: Make</li>
          <li>Software management: Virtual environments</li>
          <li>Dynamic document generation: LaTeX</li>
      </ul>
    </section>


<section>
<section data-transition="None">
    <h2>Why: Version control and data transport?</h2>
    <dl style="font-size:35px">
        <dt>The building blocks of a scientific result are rarely static</dt>
            <table>
                <tr>
                    <td>Analysis code evolves<br>
                    <small>(Fix bugs, add functions,
                        refactor, ...)</small></td>
                    <td><img src="pics/final.png" height="500">
                    <imgcredit>Based on Piled Higher and Deeper
                        <a href="https://phdcomics.com/comics/archive_print.php?comicid=1531" target="_blank">
                            1531
                        </a> </imgcredit></td>
                </tr>
            </table>
    </dl>
</section>

<section data-transition="None">
    <h2>Why: Version control and data transport?</h2>
    <dl style="font-size:35px">
        <dt>The building blocks of a scientific result are rarely static</dt>
            <table>
                <tr>
                    <td>Data changes <br>
                        <small>(errors are fixed, data is extended,<br>
                            naming standards change, an analysis <br>
                                requires only a subset of your data...)</small></td>
                    <td><img src="pics/phd052810s.png" height="500">
                    <imgcredit>Piled Higher and Deeper
                        <a href="https://phdcomics.com/comics/archive_print.php?comicid=1323" target="_blank">
                            1323
                        </a> </imgcredit></td>
                </tr>
            </table>
    </dl>
</section>


    <section data-transition="None">
    <h2>How it works: Version control and data transport</h2>

        <ul style="font-size:35px">
        <li class="fragment fade-in-then-semi-out" data-fragment-index="1">
            DataLad<a href="https://joss.theoj.org/papers/10.21105/joss.03262" target="_blank">
        (Halchenko et al)</a>: Open source, domain-agnostic data management & data publication tool,
            build on top of <a href="https://git-scm.com/" target="_blank">Git</a>
            and <a href="https://git-annex.branchable.com/" target="_blank">Git-annex</a> (Joey Hess)
        </li>
        <li class="fragment fade-in" data-fragment-index="2">
            <b>Main features used in this publication:</b>
        </li>
            <ul >
                <li class="fragment fade-in" data-fragment-index="2">
                    version-controlling and linking arbitrarily large digital objects
                    (data, software, code, results),
                </li>
                <li class="fragment fade-in" data-fragment-index="3">
                    transport mechanisms for sharing, obtaining & collaborating
                    on data (analysis) using existing infrastructure without
                    a central service
                </li>
        </ul>
    </ul>
        <table>
            <tr>
                <td>
                     <img class="fragment fade-in" data-fragment-index="2" src="pics/git-repo.png">
                </td>
                <td>
                    <img class="fragment fade-in" data-fragment-index="2" src="pics/local_wf.svg" height="400">
                </td>
            </tr>
        </table>
</section>

    <section data-transition="None">
    <h2>How it works: Version control and data transport</h2>

        <ul style="font-size:35px">
        <li>
            DataLad<a href="https://joss.theoj.org/papers/10.21105/joss.03262" target="_blank">
        (Halchenko et al)</a>: Open source, domain-agnostic data management & data publication tool,
            build on top of <a href="https://git-scm.com/" target="_blank">Git</a>
            and <a href="https://git-annex.branchable.com/" target="_blank">Git-annex</a> (Joey Hess)
        </li>
        <li>
            <b>Main features used in this publication:</b>
        </li>
            <ul >
                <li>
                    version-controlling and linking arbitrarily large digital objects
                    (data, software, code, results),
                </li>
                <li>
                    transport mechanisms for sharing, obtaining & collaborating
                    on data (analysis) using existing infrastructure without
                    a central service
                </li>
        </ul>
    </ul>
    <img class="fragment fade-in" data-fragment-index="1" src="pics/decentral_RDM.png">
</section>


    <section data-transition="None">
    <h2>How it works: Version control and data transport</h2>

        <ul style="font-size:35px">
        <li>
            DataLad<a href="https://joss.theoj.org/papers/10.21105/joss.03262" target="_blank">
        (Halchenko et al)</a>: Open source, domain-agnostic data management & data publication tool,
            build on top of <a href="https://git-scm.com/" target="_blank">Git</a>
            and <a href="https://git-annex.branchable.com/" target="_blank">Git-annex</a> (Joey Hess)
        </li>
        <li>
            <b>Main features used in this publication:</b>
        </li>
            <ul >
                <li>
                    version-controlling and linking arbitrarily large digital objects
                    (data, software, code, results),
                </li>
                <li>
                    transport mechanisms for sharing, obtaining & collaborating
                    on data (analysis) using existing infrastructure without
                    a central service
                </li>
        </ul>
    </ul>
<pre><code class="bash" style="max-height:none" data-line-numbers="1-5">(remodnav) adina@muninn in ~/repos/papers/paper-remodnav on git:master
# How large is the repository after cloning?
$ du -sh    # show disk usage in human readable sizes
16M
</code></pre>
        <p style="font-size:30px" class="fragment fade-in" data-fragment-index=1">Let's take a look into how the script retrieves data:</p>
           <p class="fragment fade-in"  data-fragment-index="2" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:50px;margin-bottom:-30px;margin-left:700px">
                        Import datalad API
                        </p>
                        <p class="fragment fade-in" data-fragment-index="3" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:170px;margin-bottom:-60px;margin-left:500px">
                         Get individual files
                        </p>
    <p style="z-index: -1">
<pre class="fragment fade-in" data-fragment-index="1" ><code class="python" style="max-height:none" data-line-numbers="3, 7">vim code/mk_figuresnstats.py

from datalad.api import get as datalad_get
[...]
infiles = [op.join('data', 'raw_eyegaze', 'sub-32', 'beh', 'sub-32_task-movie_run-5_recording-eyegaze_physio.tsv.gz'), [...]]
for f in infiles:
    datalad get(f)
    data = np.recfromcsv(f)
</code></pre>

</section>


<section data-transition="None">
    <h2>How it works: Version control and data transport</h2>

        <ul style="font-size:35px">
        <li>
            DataLad<a href="https://joss.theoj.org/papers/10.21105/joss.03262" target="_blank">
        (Halchenko et al)</a>: Open source, domain-agnostic data management & data publication tool,
            build on top of <a href="https://git-scm.com/" target="_blank">Git</a>
            and <a href="https://git-annex.branchable.com/" target="_blank">Git-annex</a> (Joey Hess)
        </li>
        <li>
            <b>Main features used in this publication:</b>
        </li>
            <ul >
                <li>
                    version-controlling and linking arbitrarily large digital objects
                    (data, software, code, results),
                </li>
                <li>
                    transport mechanisms for sharing, obtaining & collaborating
                    on data (analysis) using existing infrastructure without
                    a central service
                </li>
        </ul>
    </ul>
    <img src="pics/linkage_subds.png">
</section>

<section data-transition="None">
    <h2>How it works: Version control and data transport</h2>

        <ul style="font-size:35px">
        <li>
            DataLad<a href="https://joss.theoj.org/papers/10.21105/joss.03262" target="_blank">
        (Halchenko et al)</a>: Open source, domain-agnostic data management & data publication tool,
            build on top of <a href="https://git-scm.com/" target="_blank">Git</a>
            and <a href="https://git-annex.branchable.com/" target="_blank">Git-annex</a> (Joey Hess)
        </li>
        <li>
            <b>Main features used in this publication:</b>
        </li>
            <ul >
                <li>
                    version-controlling and linking arbitrarily large digital objects
                    (data, software, code, results),
                </li>
                <li>
                    transport mechanisms for sharing, obtaining & collaborating
                    on data (analysis) using existing infrastructure without
                    a central service
                </li>
        </ul>
    </ul>
    <p class="fragment fade-in" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:100px;margin-bottom:-30px">
                        Raw data
                        </p>
                        <p class="fragment fade-in" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:200px;margin-bottom:-60px">
                         Software package
                        </p>
    <p style="z-index: -1">
<pre><code class="bash" style="max-height:none" data-line-numbers="1-2">$ (remodnav) adina@muninn in ~/repos/papers/paper-remodnav on git:master
❱ datalad subdatasets --recursive
subdataset(ok): data/raw_eyegaze (dataset)
subdataset(ok): data/raw_eyegaze/src/lab-eyetracking (dataset)
subdataset(ok): data/studyforrest-data-eyemovementlabels (dataset)
subdataset(ok): data/studyforrest-data-eyemovementlabels/code/remodnav (dataset)
subdataset(ok): data/studyforrest-data-eyemovementlabels/inputs/raw_eyegaze (dataset)
subdataset(ok): remodnav (dataset)
subdataset(ok): remodnav/remodnav/tests/data/anderson_etal (dataset)
subdataset(ok): remodnav/remodnav/tests/data/studyforrest (dataset)
action summary:
  subdataset (ok: 8)
</code></pre>
</section>

<section>
    <h2>How it works: Version control and data transport</h2>
    <img src="pics/researchlog.png">
</section>
</section>

<section>
<section data-transition="None">
    <h2>Why: Workflow management?</h2>
    "Shit, which parametrization of which script produced these outputs from which subset
    of what data in which order?"<br>
    <img src="pics/manuallabor.png">
    <img src="pics/findfiles.png" height="400">
    <img src="pics/projectstack.png" height="350">
    <imgcredit>CC-BY Scriberia and <a href="https://the-turing-way.netlify.app/reproducible-research/rdm.html" target="_blank">
        The Turing Way</a>
    </imgcredit>
</section>


    <section>
        <h2>How it works: Workflow management</h2>
        Makefiles!
                   <p class="fragment fade-in"  data-fragment-index="2" style="font-size:25px; z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:50px;margin-bottom:-30px;margin-left:700px">
                        The final result: A manuscript PDF
                        </p>
                        <p class="fragment fade-in" data-fragment-index="3" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:170px;margin-bottom:-60px;margin-left:800px">
                         Its ingredients:
                         Manuscript sources and results.
                         Only render the manuscript when those exist.
                        </p>
        <p class="fragment fade-in" data-fragment-index="4" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:540px;margin-bottom:-60px;margin-left:800px">
                         How to generate results and figures
                        </p>
        <p class="fragment fade-in" data-fragment-index="4" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:740px;margin-bottom:-60px;margin-left:750px">
                         Clean-up routine
                        </p>
    <p style="z-index: -1">
<pre class="fragment fade-in" data-fragment-index="1"><code class="make" style="max-height:none" data-line-numbers="5, 9, 16, 25, 27"># use `chronic` to make output look neater, if available
CHRONIC=$(shell which chronic || echo '' )
PYTHON=python

all: main.pdf

# important to process stats and figures first, such that
# up-to-date versions are compiled into the manuscript
main.pdf: main.tex results_def.tex references.bib
	@echo "# Render figures"
	$(MAKE) -C img
	@echo "# Render manuscript"
	@$(CHRONIC) latexmk -pdf -g $<

# the stats-script outputs all scores and figures
results_def.tex: code/mk_figuresnstats.py
	@test -z "$$VIRTUAL_ENV" && \
		echo "ERROR: must be executed in a virtual env (set VIRTUAL_ENV to fake one)" && \
		exit 1 || true
	@echo "# Ensure REMODNAV installation"
	@python -m pip install pandas==1.0.5 seaborn==0.10.1 scikit-learn==0.23.0 datalad
	@datalad get -n remodnav
	@$(CHRONIC) pip install -e remodnav
	@rm -f $@
	@REMODNAV_RESULTS=$@ $(PYTHON) code/mk_figuresnstats.py -s -f -r -m

clean:
	rm -f main.bbl main.aux main.blg main.log main.out main.pdf main.tdo \
		main.fls main.fdb_latexmk texput.log \
		results_def.tex
	$(MAKE) -C img clean

virtualenv:

.PHONY: clean

</code></pre>
    </section>
    </section>


    <section>
    <section data-transition="None">
        <h2>Why: Software Management?</h2>
    "Works on my machine"
    <img src="pics/WOMM.jpg">
    <imgcredit><a href="https://derickbailey.com/2017/02/08/digging-into-the-works-on-my-machine-problem/" target="_blank">
        derickbailey.com
    </a> </imgcredit>
</section>


<section data-transition="None">
    <h2>Why: Software Management?</h2>
    "This used to work on my machine..."
    <img src="pics/WOMM2.jpg">
        <imgcredit>Based on <a href="https://derickbailey.com/2017/02/08/digging-into-the-works-on-my-machine-problem/" target="_blank">
        derickbailey.com
    </a> </imgcredit>
</section>

    <section>
        <h2>How it works: Software management</h2>
        <p class="fragment fade-in" data-fragment-index="4" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:340px;margin-bottom:-60px;margin-left:200px">
                         Set up software environment prior to computing
                        </p>

    <p style="z-index: -1">
<pre class="fragment fade-in" data-fragment-index="1"><code class="make" style="max-height:none" data-line-numbers="17-23"># use `chronic` to make output look neater, if available
CHRONIC=$(shell which chronic || echo '' )
PYTHON=python

all: main.pdf

# important to process stats and figures first, such that
# up-to-date versions are compiled into the manuscript
main.pdf: main.tex results_def.tex references.bib
	@echo "# Render figures"
	$(MAKE) -C img
	@echo "# Render manuscript"
	@$(CHRONIC) latexmk -pdf -g $<

# the stats-script outputs all scores and figures
results_def.tex: code/mk_figuresnstats.py
	@test -z "$$VIRTUAL_ENV" && \
		echo "ERROR: must be executed in a virtual env (set VIRTUAL_ENV to fake one)" && \
		exit 1 || true
	@echo "# Ensure REMODNAV installation"
	@python -m pip install pandas==1.0.5 seaborn==0.10.1 scikit-learn==0.23.0 datalad
	@datalad get -n remodnav
	@$(CHRONIC) pip install -e remodnav
	@rm -f $@
	@REMODNAV_RESULTS=$@ $(PYTHON) code/mk_figuresnstats.py -s -f -r -m

clean:
	rm -f main.bbl main.aux main.blg main.log main.out main.pdf main.tdo \
		main.fls main.fdb_latexmk texput.log \
		results_def.tex
	$(MAKE) -C img clean

virtualenv:

.PHONY: clean

</code></pre>
    </section>
</section>

<section>
<section>
    <h2>Why: Dynamic document generation?</h2>
    <img src="pics/copypaste.jpg" height="500px">
    <imgcredit><a href="https://memegenerator.net/instance/63989912/days-since-0-days-since-copy-paste-error" target="_blank">
                    Memegenerator</a>
                  </imgcredit>
</section>



<section data-transition="None">
        <h2>How it works: Dynamic document generation</h2>

        <p style="font-size:30px">Let's take a look into how results and figures are saved by the script:</p>
       <p style="z-index: -1">
<pre class="fragment fade-in" data-fragment-index="1"><code class="python" data-line-numbers="" style="max-height:none">def mk_confusion_figures(fig, stat):
    """
    small helper function to save all confusion matrices
    """
    max_mclf = 0
    for pair in itertools.combinations(['MN', 'RA', 'AL'], 2):
        plt.figure(
            # fake size to get the font size down in relation
            figsize=(14, 3),
            dpi=120,
            frameon=False)
        cur_max_mclf = confusion(pair[0],
                                 pair[1],
                                 fig,
                                 stat)
        plt.savefig(
            op.join('img', 'confusion_{}_{}.svg'.format(*pair)),
            transparent=True,
            bbox_inches="tight",
            metadata={'Date': None})
        plt.close()
        if cur_max_mclf > max_mclf:
            max_mclf = cur_max_mclf
    if stat:
        rsout('\\newcommand{\\maxmclf}{%s}'
              % ('%.1f' % max_mclf))
</code></pre>
    </section>


    <section data-transition="None">
        <h2>How it works: Dynamic document generation</h2>

        <p style="font-size:30px">Let's take a look into how results and figures are saved by the script:</p>
                <p class="fragment fade-in" data-fragment-index="4" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:340px;margin-bottom:-60px;margin-left:200px">
                        Figures are saved into a relative project path
                        </p>
    <p style="z-index: -1">
<pre><code class="python" style="max-height:none" data-line-numbers="16-20">def mk_confusion_figures(fig, stat):
    """
    small helper function to save all confusion matrices
    """
    max_mclf = 0
    for pair in itertools.combinations(['MN', 'RA', 'AL'], 2):
        plt.figure(
            # fake size to get the font size down in relation
            figsize=(14, 3),
            dpi=120,
            frameon=False)
        cur_max_mclf = confusion(pair[0],
                                 pair[1],
                                 fig,
                                 stat)
        plt.savefig(
            op.join('img', 'confusion_{}_{}.svg'.format(*pair)),
            transparent=True,
            bbox_inches="tight",
            metadata={'Date': None})
        plt.close()
        if cur_max_mclf > max_mclf:
            max_mclf = cur_max_mclf
    if stat:
        rsout('\\newcommand{\\maxmclf}{%s}'
              % ('%.1f' % max_mclf))
</code></pre>
    </section>

    <section data-transition="None">
        <h2>How it works: Dynamic document generation</h2>

                <p style="font-size:30px">The LaTeX sources can directly embed this figure:</p>
                <p class="fragment fade-in" data-fragment-index="4" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:120px;margin-bottom:-60px;margin-left:350px">
                        Figures are embedded into the manuscript sources
                        </p>
    <p style="z-index: -1">
<pre><code class="latex" style="max-height:none" data-line-numbers="2-4">\begin{figure*}
  \includegraphics[trim=0 0 0 0,clip,width=1\textwidth]{img/confusion_MN_RA.pdf} \\
  \includegraphics[trim=0 0 0 6.6mm,clip,width=1\textwidth]{img/confusion_MN_AL.pdf} \\
  \includegraphics[trim=0 0 0 6.6mm,clip,width=1\textwidth]{img/confusion_RA_AL.pdf}
  \caption{Confusion patterns for pairwise eye movement classification
    comparison of both human raters \citep[MN and RA; ][]{Andersson2017} and the
    \remodnav\ algorithm (AL) for gaze recordings from stimulation with static
    images (left column), moving dots (middle column), and video clips (right
    column).  All matrices present gaze sample based Jaccard indices \citep[JI;
    ][]{jaccard1901etude}. Consequently, the diagonals depict the fraction of
    time points labeled congruently by both raters in relation to the number of
    timepoints assigned to a particular event category by any rater.}
  % Give a unique label
  \label{fig:conf}
\end{figure*}

</code></pre>
    </section>


    <section data-transition="None">
        <h2>How it works: Dynamic document generation</h2>
        <img src="pics/fig_example.png">
    </section>


    <section data-transition="None">
        <h2>How it works: Dynamic document generation</h2>

        <p style="font-size:30px">What about tables?</p>
                <p class="fragment fade-in" data-fragment-index="4" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:550px;margin-bottom:-60px;margin-left:200px">
                        We print them under a unique label
                        as a LaTeX \newcommand variable
                        </p>
    <p style="z-index: -1">
<pre><code class="python" style="max-height:none" data-line-numbers="24-26">def mk_confusion_figures(fig, stat):
    """
    small helper function to save all confusion matrices
    """
    max_mclf = 0
    for pair in itertools.combinations(['MN', 'RA', 'AL'], 2):
        plt.figure(
            # fake size to get the font size down in relation
            figsize=(14, 3),
            dpi=120,
            frameon=False)
        cur_max_mclf = confusion(pair[0],
                                 pair[1],
                                 fig,
                                 stat)
        plt.savefig(
            op.join('img', 'confusion_{}_{}.svg'.format(*pair)),
            transparent=True,
            bbox_inches="tight",
            metadata={'Date': None})
        plt.close()
        if cur_max_mclf > max_mclf:
            max_mclf = cur_max_mclf
    if stat:
        rsout('\\newcommand{\\maxmclf}{%s}'
              % ('%.1f' % max_mclf))
</code></pre>
        <p class="fragment fade-in" style="font-size:30px">For example, <code>\newcommand{\maxmclf}{10.8}</code></p>
    </section>


    <section data-transition="None">
        <h2>How it works: Dynamic document generation</h2>

                <p style="font-size:30px">Output is automatically written to <code>results_def.tex</code>...</p>
                <p class="fragment fade-in" data-fragment-index="4" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:120px;margin-bottom:-60px;margin-left:350px">
                        The value 6.1 will be in a LaTeX variable \imgMNRAMCLF
                        </p>
    <p style="z-index: -1">
<pre><code class="latex" style="max-height:none" data-line-numbers="2">$ cat results_def.tex
\newcommand{\imgMNRAMCLF}{6.1}
\newcommand{\imgMNRAMclfWOP}{3.0}
\newcommand{\imgMNRAFIXref}{70}
\newcommand{\imgMNRASACref}{9}
\newcommand{\imgMNRAPSOref}{21}
\newcommand{\imgMNRASPref}{0}
\newcommand{\imgMNRAFIXcod}{13}
\newcommand{\imgMNRASACcod}{15}
\newcommand{\imgMNRAPSOcod}{20}
\newcommand{\imgMNRASPcod}{53}
[...]
</code></pre>
    </section>


    <section data-transition="None">
        <h2>How it works: Dynamic document generation</h2>
                <p style="font-size:30px">...and can be used in the LaTeX sources:</p>
                <p class="fragment fade-in" data-fragment-index="3" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:80px;margin-bottom:-60px;margin-left:350px">
                        Make the variables available to the LaTeX sources
                        </p>
                <p class="fragment fade-in" data-fragment-index="4" style="z-index: 100;position: fixed;background-color:#ede6d5;font-size:35px;box-shadow: 10px 10px 8px #888888;margin-top:480px;margin-bottom:-60px;margin-left:350px">
                        Use them to embed the results in a table
                        </p>
    <p style="z-index: -1">
<pre><code class="latex" style="max-height:none" data-line-numbers="2, 17">\begin{document}
\input{results_def.tex}
\onecolumn
\title{REMoDNaV: Robust Eye-Movement Classification for Dynamic Stimulation} %\\ (remodnav)

[...]

\begin{table}[tbp]
  \caption{Cohen's Kappa reliability between human coders (MN, RA), and \remodnav\ (AL)
  with each of the human coders.}
  \label{tab:kappa}
  \begin{tabular*}{0.5\textwidth}{c @{\extracolsep{\fill}}llll}
    \textbf {Fixations}                   &                  &                   &                    \\
    \hline\noalign{\smallskip}
    Comparison                            & Images           & Dots              & Videos             \\
    \noalign{\smallskip}\hline\noalign{\smallskip}
    MN versus RA                          & \kappaRAMNimgFix & \kappaRAMNdotsFix & \kappaRAMNvideoFix \\
    AL versus RA                          & \kappaALRAimgFix & \kappaALRAdotsFix & \kappaALRAvideoFix \\
    AL versus MN                          & \kappaALMNimgFix & \kappaALMNdotsFix & \kappaALMNvideoFix \\
    \noalign{\smallskip}\hline
  \end{tabular*}
\end{table}
    </code></pre>
    </section>

    <section data-transition="None">
        <h2>How it works: Dynamic document generation</h2>
        <img src="pics/table_example.png">
    </section>

</section>



    <section>
        <h2>Add a few basic RDM strategies</h2>
        <ul>
            <li class="fragment fade-in" data-fragment-index="1">Create an intuitive structure, ideally comply to standards</li>
            <pre class="fragment fade-in" data-fragment-index="1"><code class="fragment fade-in" data-fragment-index="1">├── code/                        # scripts
├── data/                        # datasets
├── img/                         # computed figures
├── main.tex                     # manuscript sources
├── Makefile                     # documentation for machines
├── README.md                    # documentation for humans
├── references.bib
├── remodnav/                    # software
└── results_def.tex              # numerical results
            </code></pre>
            <li class="fragment fade-in" data-fragment-index="2">Ensure completeness and portability:</li>
            <pre class="fragment fade-in-then-semi-out" data-fragment-index="3"><code class="fragment fade-in-then-semi-out" data-fragment-index="3"># ANTIPATTERN
# read important configuration
path = '/nfs/e2/somewhere/outside/theproject/veryimportant.info'</code></pre>
            <pre class="fragment fade-in" data-fragment-index="4"><code class="fragment fade-in" data-fragment-index="4"># include important configuration, read from a relative path
path = 'code/veryimportant.info'</code></pre>
        </ul>
    </section>

<section>
<section data-transition="None">
    <h2>Why would you want to work this way?</h2>
    <dl style="font-size:35px">
        <br>
        <br>
            <table>
                <tr>
                    <td>Data changes (for real) <br>
                        <small>(errors are fixed, data is extended,<br>
                            naming standards change, ...)</small></td>
                    <td>
                    <b>Example</b>: <br>I found an error in one of the public datasets -<br>
                       just before submission</td>
                </tr>
            </table>
        <img src="pics/datahistory.png" >
    </dl>
            <img class="fragment fade-in" src="pics/updatedata.png" height="300px">
</section>

  <section>
  <h2>Why would you want to work this way?</h2>
                    <img class="fragment fade-in" src="pics/efficiency.png" height="500px">
                  <imgcredit>CC-BY Scriberia and <a href="https://the-turing-way.netlify.app/reproducible-research/rdm.html" target="_blank">
                    The Turing Way</a>
                  </imgcredit>
          <ul class="fragment fade-in">
              <li>Save time</li>
              <li>Have a framework for collaboration</li>
              <li>Gain confidence in the validity of your results</li>
              <li>Make a more convincing case with your research</li>
              <li>Make your research more accessible </li>
              <li>Increase your work's reusability</li>
          </ul>
  </section>

  <section data-background-image="pics/ohno.png" data-background-opacity="20%">
      <h2>"Oh god, but I don't know any of the tools..."</h2>
      <ul>
          <dd class="fragment fade-in-then-semi-out">
              Use other tools! (RMarkdown/Bookdown, Snakemake,
              Bash scripts for orchestration, Guix, Software containers, ...).
              What matters is the result, not how you get there</dd>
          <dd class="fragment fade-in-then-semi-out">
              There are even complete frameworks, such as WORCS
              (<a href="https://content.iospress.com/articles/data-science/ds210031" target="_blank">
              Van Lissa et al., 2020)</a> or <a href="https://doi.org/10.5964/qcmb.3763" target="_blank">
              Peikert & Brandmaier, 2021 </a>
          </dd>
          <dd class="fragment fade-in-then-semi-out">
              There are tutorials and documentation everywhere, e.g., for
              <a href="https://github.com/datalad-handbook/repro-paper-sketch/" target="_blank">
              our paper</a>, using <a href="https://the-turing-way.netlify.app/reproducible-research/make/make-casestudy.html" target="_blank">
              Make</a>, in <a href="https://osf.io/pxfjg/download" target="_blank">R</a>, etc.
          </dd>
      </ul>

  </section>
</section>



</section>

<section>
<section>
    <h2>Acknowledgements</h2>
  <table style="font-size:35px">
  <tr style="vertical-align:middle;margin-bottom:-20px">
    <td style="vertical-align:middle">
      <dl>
        <dt>Mentors + Co-authors</dt>
        <dd style="margin-left:5px!important">
          <ul style="margin-left:5px!important">
              <li>Michael Hanke & Asim H. Dar</li>
              <li>Psychoinformatics Lab</li>
          </ul>
        </dd>
      </dl>
      <dl>
        <dt>Illustrations and Tutorials</dt>
        <dd style="margin-left:5px!important">
          <ul style="margin-left:5px!important">
              <li>The Turing Way + Scriberia</li>
          </ul>
        </dd>
      </dl>
      <dl>
        <dt>Creators and Maintainers <br>
            of our ecosystem of <br>
            open source tools</dt>
      </dl>
    </td>
    <td style="vertical-align:middle">
  <img style="height:300px;margin-right:50px" data-src="pics/coauthors.png" />
  <img style="height:350px;margin-right:50px" data-src="pics/lab.png" />
  </td>
  </tr>
  </table>
</section>

<section>
    <h2>Thanks for your attention</h2>
    <img src="pics/QRcode.png" height="400"><br>
        <small>Slides at
        <a href="https://doi.org/10.5281/zenodo.5508797" target="_blank">
            DOI 10.5281/zenodo.5508797</a> </small>
    <br><br>
    <div style="margin-top:1em;text-align:center">
    <small>
    <table>
        <tr>
        </tr>
        <tr style="vertical-align:middle">
         <td>
             <img src="pics/winrepo.png">
         </td>
            <td style="font-size: 18px">
                <br><br>
                Women neuroscientists are <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/ejn.14397" target="_blank">
                underrepresented in neuroscience</a>. You can use the <br>
                <a href="https://www.winrepo.org/" target="_blank"> Repository for Women in Neuroscience</a> to find
                and recommend neuroscientists for <br>
                conferences, symposia or collaborations, and help making neuroscience more open & divers.
            </td>
        </tr>

    </table>
    </small>
    </div>
</section>
</section>


</div> <!-- /.slides -->
</div> <!-- /.reveal -->

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.js"></script>

<script>
  // Full list of configuration options available at:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    // The "normal" size of the presentation, aspect ratio will be preserved
    // when the presentation is scaled to fit different resolutions. Can be
    // specified using percentage units.
    width: 1280,
    height: 960,

    // Factor of the display size that should remain empty around the content
    margin: 0.1,

    // Bounds for smallest/largest possible scale to apply to content
    minScale: 0.2,
    maxScale: 1.0,

    controls: true,
    progress: true,
    history: true,
    center: true,
    slideNumber: 'c',

    transition: 'slide', // none/fade/slide/convex/concave/zoom

    // Optional reveal.js plugins
    dependencies: [
      { src: 'reveal.js/plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
      { src: 'reveal.js/plugin/notes/notes.js', async: true },
      { src: 'plugin/wordcloud/reveal-wordcloud.js',
        condition: function() { return !!document.querySelector( '[wordcloud]' ); } }
    ]
  });
</script>
</body>
</html>
